10장 시큐리티 처리

1. 스프링 시큐리티 개요
- 스프링 시큐리티 : 스프링 기반 보안 프레임워크
- 사용자 인증 절차, 인가 절차
- 기본 설정 : 의존 라이브러리 설정

2. 시큐리티 세부 구성 설정
- 클래스 생성 -> 빈등록
- 접근 권한 설정 : SecurityFilterChain
- 사용자 정보 설정 : UserDetailsService
- 사용자 비밀번호의 암호화 설정 : PasswordEncoder

3. 사용자 정보 검색
- 컨트롤러에서 사용자 정보 검색
- Principal
- Authentication
- @AuthenticationPrincipal
- 뷰페이지에서 사용자 정보 검색
- <sec:authorize>
- <sec:authentication>

4. 로그인과 로그아웃 처리
- 로그인 처리 
- 기본 인증 방식
- 접근 요청 -> 사용자 이름과 비밀번호 확인 (Authorization) -> 인증 처리
- 폼 기반 인증 방식
- 접근 요청 -> 사용자 이름과 비밀번호 확인 (UsernamePasswordAuthenticationFilter) -> 인증 처리

- 로그아웃 처리
- http.logout()


###빈칸 문제 
1. 스프링 시큐리티는 허가된 사용자만 특정 웹페이지에 접근하도록 제한하는 ______ 기능을 쉽게 구현하게 해준다. -----> 보안
2. Thymeleaf에서 시큐리티 태그를 쓰려면 build.gradle에
implementation 'org.thymeleaf.extras:____________________________' 를 추가한다. ------> thymeleaf-extras-springsecurity6
3. PasswordEncoder 빈은 사용자 비밀번호를 ________ 하기 위한 역할이다. ------> (단방향) 암호화
4. HTTP 요청 인가(authorization)를 설정할 때 사용하는 메서드는 __________________() 이다. ---------> authorizeHttpRequests
5. /manager/ 경로를 MANAGER 권한만 접근 가능하게 하려면
.requestMatchers("/manager/**").______________("MANAGER") 를 사용한다. -------> hasRole
6. Authentication authentication 에서 사용자 이름(계정)은 authentication.__________() 로 가져온다. -------> getName
7. 커스텀 로그인 페이지 경로를 설정하는 메서드는 ________________() 이다. --------> loginPage

###코드 문제
1. --------> authorizeHttpRequests
@Configuration
@EnableWebSecurity
public class SecurityConfiguration {

    @Bean
    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {

        http.authorizeHttpRequests(
            _________________ -> authorizeHttpRequests 
                .requestMatchers("/admin/**").hasAuthority("ROLE_ADMIN")   // 1
                .requestMatchers("/manager/**").hasRole("MANAGER")         // 2
                .requestMatchers("/member/**").authenticated()             // 3
                .anyRequest().permitAll()                                  // 4
        );

        return http.build();
    }
}

2.  ------> username
@Configuration
@EnableWebSecurity
public class SecurityConfiguration {

    @Bean
    public UserDetailsService userDetailsService() {
        UserDetails admin = User.builder()
                .___________("admin")      // 사용자 이름(계정)
                .password("admin123")   // 사용자 비밀번호
                .roles("ADMIN")         // 사용자 권한
                .build();

        return new InMemoryUserDetailsManager(admin);
    }
}